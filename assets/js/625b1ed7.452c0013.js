"use strict";(globalThis.webpackChunkxtream_api_docs=globalThis.webpackChunkxtream_api_docs||[]).push([[1831],{5159(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>o,frontMatter:()=>a,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"authentication","title":"Authentication","description":"Authentication methods for Xtream Codes API","source":"@site/docs/authentication.md","sourceDirName":".","slug":"/authentication","permalink":"/xtream-codes-api/authentication","draft":false,"unlisted":false,"editUrl":"https://github.com/worldofiptvcom/xtream-codes-api/tree/main/docs/authentication.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Authentication","description":"Authentication methods for Xtream Codes API"},"sidebar":"apiSidebar","previous":{"title":"Introduction","permalink":"/xtream-codes-api/"},"next":{"title":"Error Codes","permalink":"/xtream-codes-api/error-codes"}}');var r=s(4848),i=s(8453);const a={sidebar_position:2,title:"Authentication",description:"Authentication methods for Xtream Codes API"},d="Authentication",c={},l=[{value:"Authentication Methods",id:"authentication-methods",level:2},{value:"1. Username/Password Authentication",id:"1-usernamepassword-authentication",level:3},{value:"2. IP-Based Authentication",id:"2-ip-based-authentication",level:3},{value:"3. MAC Address + Token Authentication",id:"3-mac-address--token-authentication",level:3},{value:"Step 1: Handshake",id:"step-1-handshake",level:4},{value:"Step 2: Use Token in Subsequent Requests",id:"step-2-use-token-in-subsequent-requests",level:4},{value:"4. Play Token Authentication",id:"4-play-token-authentication",level:3},{value:"Authentication Flow",id:"authentication-flow",level:2},{value:"Security Checks",id:"security-checks",level:2},{value:"Code Examples",id:"code-examples",level:2},{value:"cURL",id:"curl",level:3},{value:"Python",id:"python",level:3},{value:"PHP",id:"php",level:3},{value:"JavaScript",id:"javascript",level:3},{value:"User Status Values",id:"user-status-values",level:2},{value:"Best Practices",id:"best-practices",level:2}];function h(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"authentication",children:"Authentication"})}),"\n",(0,r.jsx)(n.p,{children:"Xtream Codes supports multiple authentication methods depending on the API endpoint."}),"\n",(0,r.jsx)(n.h2,{id:"authentication-methods",children:"Authentication Methods"}),"\n",(0,r.jsx)(n.h3,{id:"1-usernamepassword-authentication",children:"1. Username/Password Authentication"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Used by:"})," Player API, Panel API, Streaming Endpoints, Enigma2 API, XMLTV"]}),"\n",(0,r.jsx)(n.p,{children:"The most common method. Credentials are passed as query parameters."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl "http://server:25461/player_api.php?username=demo&password=test123"\n'})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Parameter"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Required"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"username"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"User's login username"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"password"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"User's login password"})]})]})]}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsx)(n.p,{children:"Credentials are case-sensitive by default. This can be configured in panel settings."})}),"\n",(0,r.jsx)(n.h3,{id:"2-ip-based-authentication",children:"2. IP-Based Authentication"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Used by:"})," Admin API (",(0,r.jsx)(n.code,{children:"api.php"}),"), System API (",(0,r.jsx)(n.code,{children:"system_api.php"}),")"]}),"\n",(0,r.jsx)(n.p,{children:"The Admin API restricts access based on server IP addresses. Only requests from authorized streaming server IPs are accepted."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Server validates request IP\nif (!in_array($request_ip, $authorized_server_ips)) {\n    die(); // Access denied\n}\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsx)(n.p,{children:"The Admin API cannot be accessed from arbitrary IPs. You must call it from a registered streaming server."})}),"\n",(0,r.jsx)(n.h3,{id:"3-mac-address--token-authentication",children:"3. MAC Address + Token Authentication"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Used by:"})," MAG Portal API (",(0,r.jsx)(n.code,{children:"portal.php"}),")"]}),"\n",(0,r.jsx)(n.p,{children:"MAG devices authenticate using their MAC address and a session token."}),"\n",(0,r.jsx)(n.h4,{id:"step-1-handshake",children:"Step 1: Handshake"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl "http://server:25461/portal.php?type=stb&action=handshake&mac=00:1A:79:XX:XX:XX"\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "js": {\n    "token": "A1B2C3D4E5F6789012345678"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h4,{id:"step-2-use-token-in-subsequent-requests",children:"Step 2: Use Token in Subsequent Requests"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl "http://server:25461/portal.php?type=stb&action=get_profile" \\\n  -H "Authorization: Bearer A1B2C3D4E5F6789012345678" \\\n  -H "Cookie: mac=00:1A:79:XX:XX:XX"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"4-play-token-authentication",children:"4. Play Token Authentication"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Used by:"})," Secure HLS Streaming"]}),"\n",(0,r.jsx)(n.p,{children:"For MAG devices and secure streaming, a play token validates stream access."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Token included in stream URL\ncurl "http://server:25461/live/user/pass/123.ts?play_token=xyz789"\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Token Structure:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"{random_string}:{expire_timestamp}:{stream_id}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"authentication-flow",children:"Authentication Flow"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:"sequenceDiagram\n    participant Client\n    participant Server\n    participant Database\n\n    Client->>Server: Request with username/password\n    Server->>Database: Validate credentials\n    Database--\x3e>Server: User data\n    Server->>Server: Check expiration\n    Server->>Server: Check enabled status\n    Server->>Server: Check IP restrictions\n    Server->>Server: Check country restrictions\n    Server--\x3e>Client: Response (success/error)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"security-checks",children:"Security Checks"}),"\n",(0,r.jsx)(n.p,{children:"When authenticating, the server performs these checks in order:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Order"}),(0,r.jsx)(n.th,{children:"Check"}),(0,r.jsx)(n.th,{children:"Error Code"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"1"}),(0,r.jsx)(n.td,{children:"Username/password valid"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"AUTH_FAILED"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"2"}),(0,r.jsx)(n.td,{children:"Account not expired"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"USER_EXPIRED"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"3"}),(0,r.jsx)(n.td,{children:"Admin enabled"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"USER_BAN"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"4"}),(0,r.jsx)(n.td,{children:"User enabled"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"USER_DISABLED"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"5"}),(0,r.jsx)(n.td,{children:"IP in whitelist (if configured)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"IP_BAN"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"6"}),(0,r.jsx)(n.td,{children:"Country allowed"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"COUNTRY_DISALLOW"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"7"}),(0,r.jsx)(n.td,{children:"User agent allowed"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"USER_AGENT_BAN"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"8"}),(0,r.jsx)(n.td,{children:"ISP allowed"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ISP_LOCK_FAILED"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"9"}),(0,r.jsx)(n.td,{children:"Max connections not exceeded"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"USER_ALREADY_CONNECTED"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"10"}),(0,r.jsx)(n.td,{children:"Stream in user's bouquet"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"NOT_IN_BOUQUET"})})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"code-examples",children:"Code Examples"}),"\n",(0,r.jsx)(n.h3,{id:"curl",children:"cURL"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Basic authentication\ncurl "http://server:25461/player_api.php?username=demo&password=test123"\n\n# With headers\ncurl "http://server:25461/player_api.php" \\\n  -G \\\n  -d "username=demo" \\\n  -d "password=test123" \\\n  -d "action=get_live_streams"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"python",children:"Python"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import requests\n\ndef authenticate(server, username, password):\n    response = requests.get(f"{server}/player_api.php", params={\n        "username": username,\n        "password": password\n    })\n    data = response.json()\n\n    if data.get("user_info", {}).get("auth") == 1:\n        return data\n    else:\n        raise Exception("Authentication failed")\n\n# Usage\nuser_data = authenticate("http://server:25461", "demo", "test123")\nprint(f"Status: {user_data[\'user_info\'][\'status\']}")\n'})}),"\n",(0,r.jsx)(n.h3,{id:"php",children:"PHP"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"<?php\nfunction authenticate($server, $username, $password) {\n    $url = \"{$server}/player_api.php?\" . http_build_query([\n        'username' => $username,\n        'password' => $password\n    ]);\n\n    $response = file_get_contents($url);\n    $data = json_decode($response, true);\n\n    if ($data['user_info']['auth'] == 1) {\n        return $data;\n    }\n    throw new Exception(\"Authentication failed\");\n}\n\n// Usage\n$userData = authenticate(\"http://server:25461\", \"demo\", \"test123\");\necho \"Status: \" . $userData['user_info']['status'];\n?>\n"})}),"\n",(0,r.jsx)(n.h3,{id:"javascript",children:"JavaScript"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:'async function authenticate(server, username, password) {\n    const url = new URL(`${server}/player_api.php`);\n    url.searchParams.set(\'username\', username);\n    url.searchParams.set(\'password\', password);\n\n    const response = await fetch(url);\n    const data = await response.json();\n\n    if (data.user_info?.auth === 1) {\n        return data;\n    }\n    throw new Error("Authentication failed");\n}\n\n// Usage\nconst userData = await authenticate("http://server:25461", "demo", "test123");\nconsole.log(`Status: ${userData.user_info.status}`);\n'})}),"\n",(0,r.jsx)(n.h2,{id:"user-status-values",children:"User Status Values"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Status"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Active"})}),(0,r.jsx)(n.td,{children:"Account is active and valid"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Expired"})}),(0,r.jsx)(n.td,{children:"Account subscription has expired"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Disabled"})}),(0,r.jsx)(n.td,{children:"Account disabled by user"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Banned"})}),(0,r.jsx)(n.td,{children:"Account banned by admin"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Store credentials securely"})," - Never hardcode in client apps"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use HTTPS"})," - Always use port 25463 for production"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Handle expiration"})," - Check ",(0,r.jsx)(n.code,{children:"exp_date"})," and notify users"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Respect rate limits"})," - Max 20 requests/second per IP"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cache responses"})," - Don't re-authenticate for every request"]}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453(e,n,s){s.d(n,{R:()=>a,x:()=>d});var t=s(6540);const r={},i=t.createContext(r);function a(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);